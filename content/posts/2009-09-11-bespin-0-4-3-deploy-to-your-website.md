---
title: 'Bespin 0.4.3: “deploy” to your website!'
author: Kevin Dangoor
type: post
date: 2009-09-11T18:38:53+00:00
url: /2009/09/11/bespin-0-4-3-deploy-to-your-website/
categories:
  - Bespin

---
Bespin 0.4.3 (&#8220;[Chuck Finley][1]&#8220;) is live and it includes three new features that are worth mentioning (plus a handful of other changes that I won&#8217;t bother with for now).

One is the start of an often-requested feature: **deployment from Bespin to other servers**. Initially, the only way to get projects out of Bespin was to export the project as a zip file or tarball. Then, we added version control system support, which meant that you could push from Bespin to some repository and update a site from there. Now, Bespin can push directly to a remote server.

### I see you

I&#8217;ll come back to that feature in a moment. 0.4.3 also includes our first addition to the collaboration feature that was released last month: collaborator cursor tracking.

[<img class="alignnone size-full wp-image-2620" title="Cursors" src="http://www.blueskyonmars.com/images/2009/09/Cursors.png" alt="Cursors" width="642" height="173" srcset="https://www.blueskyonmars.com/images/2009/09/Cursors.png 642w, https://www.blueskyonmars.com/images/2009/09/Cursors-300x80.png 300w" sizes="(max-width: 642px) 100vw, 642px" />][2]

In the screen shot above, you can see part of the browser windows of two users editing the same file. In the initial collaboration release, you could see everyone editing as they edited, but you couldn&#8217;t see who was editing which parts of the file at a given moment in time. With the cursor tracking, you can easily see where each user is editing. This is the first of many planned improvements to collaboration, and we&#8217;ll be talking about some of those soon.

Now, back to deployment!

### Remote server deployment in 3 easy steps

Right now, you can get to the deployment feature by running the &#8220;deploy&#8221; command. deploy defaults to deploying the current project. Deployment uses the same security measures used by the version control system support. Specifically, your remote server access credentials are encrypted using a &#8220;keychain password&#8221; that is not stored anywhere on the Bespin server. When you first run deploy or a vcs command, you will be prompted for your keychain password:

[<img class="alignnone size-full wp-image-2622" title="Deployment prompts for keychain password" src="http://www.blueskyonmars.com/images/2009/09/deploy1.png" alt="Deployment prompts for keychain password" width="331" height="86" srcset="https://www.blueskyonmars.com/images/2009/09/deploy1.png 331w, https://www.blueskyonmars.com/images/2009/09/deploy1-300x77.png 300w" sizes="(max-width: 331px) 100vw, 331px" />][3]

If you&#8217;ve never had a keychain password before, no problem! Bespin will save the password the first time you use it. Be careful, though: we have no way to recover this password if it is lost.

This also brings me to another new feature of Bespin &#8220;Chuck Finley&#8221;: **you only have to enter your keychain password once per session**. Previously, every time you did something that required keychain access, Bespin would prompt you. Now, you only enter it once and the password is saved in memory in your browser.

The &#8220;deploy&#8221; command is actually short for &#8220;deploy now&#8221;. If you&#8217;ve never configured deployment before, you&#8217;ll be prompted to run &#8220;deploy setup&#8221; the first time. Here is what the setup screen is like:

[<img class="alignnone size-full wp-image-2623" title="deploy setup page" src="http://www.blueskyonmars.com/images/2009/09/deploy2.png" alt="deploy setup page" width="331" height="190" srcset="https://www.blueskyonmars.com/images/2009/09/deploy2.png 331w, https://www.blueskyonmars.com/images/2009/09/deploy2-300x172.png 300w" sizes="(max-width: 331px) 100vw, 331px" />][4]

Right now, Bespin only supports SFTP connections. Depending on what users need, we will likely add support for other kinds of remote deployment. Adding other kinds of deployment should be easy, thanks to [Stavros Korokithakis][5]&#8216; [Omnisync][6] library, which abstracts away the file transfer type. Extra thanks to Stavros for changing the license of Omnisync to be compatible with our desires for Bespin.

&#8220;Remote host&#8221; and &#8220;remote directory&#8221; tell Bespin where your files should end up. The remote directory is relative to your home directory on the remote server, unless you start it off with a /.

There are two ways for you to authenticate with the remote server: SSH Key and Password. The SSH Key is the same one used by the VCS commands. It&#8217;s a key generated by Bespin, and you can get your public key by running **vcs getkey**. Paste that key into .ssh/authorized_keys on your remote server, and you&#8217;re set!

Using usernames/passwords works just fine as well, and once you&#8217;ve entered your username and password you won&#8217;t need to do so again because they are stored away in your keychain.

If you want to make sure that everything is configured correctly, you can run the **deploy test** command. This runs through all of the deployment steps but does not actually copy the files over.

[<img class="alignnone size-full wp-image-2624" title="Deployment test" src="http://www.blueskyonmars.com/images/2009/09/deploy3.png" alt="Deployment test" width="684" height="191" srcset="https://www.blueskyonmars.com/images/2009/09/deploy3.png 684w, https://www.blueskyonmars.com/images/2009/09/deploy3-300x83.png 300w" sizes="(max-width: 684px) 100vw, 684px" />][7]

The screenshot above shows what deployment looks like. You&#8217;ll notice the messages about the files being identical. That&#8217;s a great feature of Omnisync: rather than copying over every file, it only copies over the changed files. I&#8217;d also like to see us support rsync which has this same property, but is much faster because it only copies differences across.

Once your deployment is configured and tested, just run &#8220;deploy&#8221; every time you&#8217;re ready to push your files up to the remote server.

I&#8217;m curious to [hear your feedback][8] on this new feature.

### &#8220;svn&#8221; command

One final feature of note: Bespin has a unique &#8220;vcs&#8221; command which **operates the same regardless of which version control system you use**. I think that&#8217;s a great feature, particularly when you&#8217;re working with projects that are managed by a variety of VCSes. However, there are some times when you want to use the commands you&#8217;re familiar with, or if you need to take an action that is specific to a given VCS.

Bespin 0.4.3 adds a fairly complete &#8220;svn&#8221; command that uses the same command names and parameters as the standard svn command line tool. Some commands and options won&#8217;t make sense in the context of Bespin and are therefore not available, but typing &#8220;svn command -h&#8221; (for example, &#8220;svn up -h&#8221;) will provide you with help output that is tailored to the options that Bespin supports.

Chuck Finley includes some important fixes in addition to these features. We&#8217;ll likely have another minor fixes release next week and we&#8217;ve got some big plans brewing.

 [1]: http://tv.blogs.pressdemocrat.com/10684/burn-notice-who-is-chuck-finley/
 [2]: http://www.blueskyonmars.com/images/2009/09/Cursors.png
 [3]: http://www.blueskyonmars.com/images/2009/09/deploy1.png
 [4]: http://www.blueskyonmars.com/images/2009/09/deploy2.png
 [5]: http://www.poromenos.org/
 [6]: https://launchpad.net/omnisync
 [7]: http://www.blueskyonmars.com/images/2009/09/deploy3.png
 [8]: http://groups.google.com/group/bespin/